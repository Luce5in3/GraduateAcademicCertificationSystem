# 研究生学术认证系统 - 前端项目文档

## 项目概述

本项目是研究生学术认证系统的前端部分，采用现代化的前端技术栈构建，提供学生申请证书和教师审批的完整功能。

## 技术栈

- **框架**: Vue 3 (Composition API)
- **语言**: TypeScript
- **构建工具**: Vite
- **UI 组件库**: Element Plus
- **状态管理**: Pinia
- **路由管理**: Vue Router
- **HTTP 请求**: Axios

## 项目结构

```
frontend/
├── src/
│   ├── api/                    # API 接口层
│   │   ├── request.ts          # Axios 封装和拦截器配置
│   │   ├── auth.ts             # 认证相关接口
│   │   ├── application.ts      # 证书申请相关接口
│   │   └── approval.ts         # 审批相关接口
│   ├── layouts/                # 布局组件
│   │   └── MainLayout.vue      # 主布局（头部、侧边栏、主内容区）
│   ├── router/                 # 路由配置
│   │   └── index.ts            # 路由定义和守卫
│   ├── store/                  # 状态管理
│   │   ├── index.ts            # Pinia 实例
│   │   └── user.ts             # 用户状态管理
│   ├── types/                  # TypeScript 类型定义
│   │   └── index.ts            # 公共类型和枚举
│   ├── utils/                  # 工具函数
│   │   └── index.ts            # 日期格式化、防抖、节流等
│   ├── views/                  # 页面组件
│   │   ├── Login.vue           # 登录页
│   │   ├── Register.vue        # 注册页
│   │   ├── Dashboard.vue       # 首页/仪表盘
│   │   ├── NotFound.vue        # 404 页面
│   │   ├── student/            # 学生端页面
│   │   │   ├── Application.vue      # 证书申请
│   │   │   ├── MyApplications.vue   # 我的申请列表
│   │   │   └── Profile.vue          # 个人信息
│   │   └── teacher/            # 教师端页面
│   │       ├── Approval.vue         # 待审批列表
│   │       ├── Applications.vue     # 所有申请列表
│   │       └── Profile.vue          # 个人信息
│   ├── App.vue                 # 根组件
│   └── main.ts                 # 应用入口
├── .env                        # 环境变量（基础）
├── .env.development            # 开发环境变量
├── .env.production             # 生产环境变量
├── vite.config.ts              # Vite 配置
├── tsconfig.json               # TypeScript 配置
├── tsconfig.app.json           # 应用 TypeScript 配置
└── package.json                # 项目依赖
```

## 核心功能

### 1. 用户认证

- **登录**: `/login`
  - 用户名密码登录
  - 登录成功后保存 token 和用户信息到 localStorage
  - 自动跳转到首页

- **注册**: `/register`
  - 支持学生和教师注册
  - 学生需填写学号，教师需填写工号
  - 密码强度校验（至少 6 位）

- **登出**
  - 清除本地存储的用户信息和 token
  - 跳转到登录页

### 2. 学生端功能

#### 证书申请 (`/student/application`)
- 选择证书类型（在读证明、成绩单、毕业证明、学位证明）
- 填写申请理由（可选）
- 提交申请

#### 我的申请 (`/student/my-applications`)
- 查看所有申请记录
- 申请状态展示（待审批、审批中、已通过、已拒绝、已撤销）
- 撤销待审批的申请
- 分页查询

#### 个人信息 (`/student/profile`)
- 查看用户名、学号等基本信息

### 3. 教师端功能

#### 审批管理 (`/teacher/approval`)
- 查看待审批的申请列表
- 审批操作（通过/拒绝）
- 填写审批意见
- 分页查询

#### 申请列表 (`/teacher/applications`)
- 查看所有申请记录
- 申请状态筛选
- 分页查询

#### 个人信息 (`/teacher/profile`)
- 查看用户名、工号等基本信息

### 4. 首页 (`/dashboard`)
- 欢迎信息
- 用户类型展示
- 快捷入口（根据用户类型显示不同的功能入口）

## 路由配置

### 公开路由
- `/login` - 登录页
- `/register` - 注册页

### 需认证路由
所有以下路由都需要登录后才能访问：

- `/` - 主布局
  - `/dashboard` - 首页
  - `/student/application` - 证书申请（学生）
  - `/student/my-applications` - 我的申请（学生）
  - `/student/profile` - 个人信息（学生）
  - `/teacher/approval` - 审批管理（教师）
  - `/teacher/applications` - 申请列表（教师）
  - `/teacher/profile` - 个人信息（教师）

### 路由守卫
- 未登录访问需认证页面，跳转到登录页
- 已登录访问登录/注册页，跳转到首页
- 角色权限检查（学生/教师只能访问对应的页面）

## API 接口

### 认证接口
- `POST /api/auth/login` - 登录
- `POST /api/auth/register` - 注册
- `POST /api/auth/logout` - 登出

### 证书申请接口
- `POST /api/certificate-application/submit` - 提交申请
- `GET /api/certificate-application/my-list` - 获取我的申请列表
- `GET /api/certificate-application/:id` - 获取申请详情
- `PUT /api/certificate-application/:id/cancel` - 撤销申请
- `GET /api/certificate-application/list` - 获取所有申请列表（教师）

### 审批接口
- `POST /api/approval/submit` - 提交审批
- `GET /api/approval/pending` - 获取待审批列表
- `GET /api/approval/records/:applicationId` - 获取审批记录

## 状态管理

### User Store (`store/user.ts`)

**State:**
- `token`: 用户登录 token
- `userInfo`: 用户信息（id, username, userType, studentId/teacherId）

**Actions:**
- `login(loginForm)`: 登录
- `logout()`: 登出
- `getUserType()`: 获取用户类型
- `isStudent()`: 判断是否为学生
- `isTeacher()`: 判断是否为教师

## 开发指南

### 安装依赖

```bash
npm install
```

### 开发运行

```bash
npm run dev
```

访问：http://localhost:5173

### 构建生产版本

```bash
npm run build
```

### 预览生产构建

```bash
npm run preview
```

## 配置说明

### Vite 配置 (`vite.config.ts`)

- **自动导入**: Element Plus 组件和 API 自动导入
- **路径别名**: `@` 指向 `src` 目录
- **开发服务器**: 端口 5173
- **API 代理**: `/api` 代理到 `http://localhost:8080`

### TypeScript 配置

- 严格模式开启
- 路径别名支持 `@/*` -> `src/*`
- 未使用变量和参数检查

### Axios 拦截器

**请求拦截器:**
- 自动添加 Authorization 头（Bearer Token）

**响应拦截器:**
- 统一处理响应数据
- 错误提示（401、403、404、500 等）
- 401 自动跳转到登录页

## 类型定义

### UserInfo
```typescript
interface UserInfo {
  id: string
  username: string
  userType: number
  studentId?: string
  teacherId?: string
}
```

### ApplicationStatus (枚举)
- `PENDING = 0` - 待审批
- `IN_PROGRESS = 1` - 审批中
- `APPROVED = 2` - 已通过
- `REJECTED = 3` - 已拒绝
- `CANCELLED = 4` - 已撤销

### ApprovalResult (枚举)
- `REJECTED = 0` - 拒绝
- `APPROVED = 1` - 通过

### UserType (枚举)
- `STUDENT = 1` - 学生
- `TEACHER = 2` - 教师

## 工具函数

### formatDate
格式化日期时间
```typescript
formatDate(date: Date | string, format?: string): string
```

### debounce
防抖函数
```typescript
debounce<T>(func: T, delay?: number): Function
```

### throttle
节流函数
```typescript
throttle<T>(func: T, delay?: number): Function
```

## 注意事项

1. **Token 管理**
   - Token 存储在 localStorage
   - 每次请求自动携带
   - Token 失效自动跳转登录页

2. **权限控制**
   - 路由级别权限控制
   - 不同用户类型展示不同菜单和页面

3. **错误处理**
   - 统一的错误提示
   - 网络错误友好提示

4. **数据持久化**
   - 用户信息和 Token 持久化到 localStorage
   - 页面刷新保持登录状态

## 后端接口对接

前端通过 Vite 配置的代理，所有 `/api` 开头的请求会转发到后端服务器 `http://localhost:8080`。

确保后端服务在 `http://localhost:8080` 运行，并且接口路径与前端定义的一致。

## 浏览器兼容性

- Chrome >= 87
- Firefox >= 78
- Safari >= 14
- Edge >= 88

## 常见问题

### 1. 登录后刷新页面需要重新登录？
检查 localStorage 是否正常存储 token 和 userInfo。

### 2. API 请求 404？
检查后端服务是否启动，以及 Vite 代理配置是否正确。

### 3. Element Plus 组件样式不生效？
确保在 `main.ts` 中导入了 `element-plus/dist/index.css`。

### 4. 路径别名 @ 无法识别？
检查 `tsconfig.app.json` 和 `vite.config.ts` 中的路径别名配置。

## 更新日志

### v0.0.1 (2025-12-29)
- 初始版本
- 完成基础框架搭建
- 实现用户认证功能
- 实现学生端申请功能
- 实现教师端审批功能
- 集成 Element Plus UI 组件库
- 配置 Axios 拦截器和 API 代理

## 联系方式

如有问题或建议，请联系开发团队。
