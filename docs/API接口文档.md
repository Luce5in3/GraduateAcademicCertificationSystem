# æ¯•ä¸šå­¦æœ¯è¯ä¹¦ç³»ç»Ÿ - APIæ¥å£æ–‡æ¡£

**åŸºç¡€URL**: `http://localhost:8080/api`

**ç‰ˆæœ¬**: v1.0

---

## ğŸ“‹ ç›®å½•

1. [è®¤è¯æ¨¡å—](#1-è®¤è¯æ¨¡å—)
2. [å­¦ç”Ÿä¿¡æ¯æ¨¡å—](#2-å­¦ç”Ÿä¿¡æ¯æ¨¡å—)
3. [æ•™å¸ˆä¿¡æ¯æ¨¡å—](#3-æ•™å¸ˆä¿¡æ¯æ¨¡å—)
4. [è¯æ˜ç”³è¯·æ¨¡å—](#4-è¯æ˜ç”³è¯·æ¨¡å—)
5. [å®¡æ‰¹æ¨¡å—](#5-å®¡æ‰¹æ¨¡å—)
6. [é€šç”¨è¯´æ˜](#é€šç”¨è¯´æ˜)

---

## 1. è®¤è¯æ¨¡å—

### 1.1 ç”¨æˆ·ç™»å½•

**æ¥å£åœ°å€**: `POST /api/auth/login`

**æ˜¯å¦éœ€è¦ç™»å½•**: âŒ

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "test_student",
  "password": "123456"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzUxMiJ9...",
    "userId": "U2025000001",
    "username": "test_student",
    "realName": "å¼ ä¸‰",
    "userType": 0,
    "userTypeDesc": "å­¦ç”Ÿ",
    "email": "zhangsan@example.com",
    "avatar": null
  }
}
```

---

### 1.2 ç”¨æˆ·æ³¨å†Œ

**æ¥å£åœ°å€**: `POST /api/auth/register`

**æ˜¯å¦éœ€è¦ç™»å½•**: âŒ

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "test_student",
  "password": "123456",
  "confirmPassword": "123456",
  "realName": "å¼ ä¸‰",
  "userType": 0,
  "email": "zhangsan@example.com",
  "phone": "13800138000"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": null
}
```

---

## 2. å­¦ç”Ÿä¿¡æ¯æ¨¡å—

### 2.1 æ›´æ–°å­¦ç”Ÿä¿¡æ¯ï¼ˆä»…è‡ªå·±ï¼‰

**æ¥å£åœ°å€**: `PUT /api/student`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è¯·æ±‚å‚æ•°**:
```json
{
  "idCard": "110101200001011234",
  "college": "è®¡ç®—æœºå­¦é™¢",
  "major": "è½¯ä»¶å·¥ç¨‹",
  "className": "è½¯å·¥2101",
  "grade": "2021",
  "enrollmentDate": "2021-09-01",
  "graduationDate": "2025-06-30",
  "educationLevel": "æœ¬ç§‘",
  "studyType": "å…¨æ—¥åˆ¶"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ›´æ–°å­¦ç”Ÿä¿¡æ¯æˆåŠŸ",
  "data": {
    "pkStudent": "S2025000001",
    "pkUser": "U2025000001",
    "studentNo": "2021001001",
    "name": "å¼ ä¸‰",
    "gender": 1,
    "idCard": "110101200001011234",
    "college": "è®¡ç®—æœºå­¦é™¢",
    "major": "è½¯ä»¶å·¥ç¨‹",
    "className": "è½¯å·¥2101",
    "grade": "2021",
    "enrollmentDate": "2021-09-01",
    "graduationDate": "2025-06-30",
    "educationLevel": "æœ¬ç§‘",
    "studyType": "å…¨æ—¥åˆ¶",
    "graduationStatus": 0
  }
}
```

---

### 2.2 è·å–å½“å‰ç™»å½•å­¦ç”Ÿä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/student/current`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**å“åº”ç¤ºä¾‹**: åŒ2.1

---

### 2.3 åˆ é™¤å­¦ç”Ÿä¿¡æ¯

**æ¥å£åœ°å€**: `DELETE /api/student/{pkStudent}`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `pkStudent`: å­¦ç”Ÿä¸»é”®

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "åˆ é™¤å­¦ç”Ÿä¿¡æ¯æˆåŠŸ",
  "data": null
}
```

---

### 2.4 æ ¹æ®ä¸»é”®æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/student/{pkStudent}`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `pkStudent`: å­¦ç”Ÿä¸»é”®

**å“åº”ç¤ºä¾‹**: åŒ2.1

---

### 2.5 æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/student/user/{pkUser}`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `pkUser`: ç”¨æˆ·ä¸»é”®

**å“åº”ç¤ºä¾‹**: åŒ2.1

---

### 2.6 æ ¹æ®å­¦å·æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/student/studentNo/{studentNo}`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `studentNo`: å­¦å·

**å“åº”ç¤ºä¾‹**: åŒ2.1

---

### 2.7 åˆ†é¡µæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/student/page`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**æŸ¥è¯¢å‚æ•°**:
- `current`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `size`: æ¯é¡µæ¡æ•°ï¼ˆé»˜è®¤10ï¼‰
- `college`: å­¦é™¢ï¼ˆå¯é€‰ï¼‰
- `major`: ä¸“ä¸šï¼ˆå¯é€‰ï¼‰
- `graduationStatus`: æ¯•ä¸šçŠ¶æ€ï¼ˆå¯é€‰ï¼Œ0-åœ¨è¯» 1-å·²æ¯•ä¸š 2-ç»“ä¸šï¼‰

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/student/page?current=1&size=10&college=è®¡ç®—æœºå­¦é™¢&major=è½¯ä»¶å·¥ç¨‹
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "pkStudent": "S2025000001",
        "pkUser": "U2025000001",
        "studentNo": "2021001001",
        "name": "å¼ ä¸‰",
        "gender": 1,
        "college": "è®¡ç®—æœºå­¦é™¢",
        "major": "è½¯ä»¶å·¥ç¨‹"
      }
    ],
    "total": 100,
    "size": 10,
    "current": 1,
    "pages": 10
  }
}
```

---

## 3. æ•™å¸ˆä¿¡æ¯æ¨¡å—

### 3.1 æ›´æ–°æ•™å¸ˆä¿¡æ¯ï¼ˆä»…è‡ªå·±ï¼‰

**æ¥å£åœ°å€**: `PUT /api/teacher`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è¯·æ±‚å‚æ•°**:
```json
{
  "idCard": "110101198501052345",
  "college": "è®¡ç®—æœºå­¦é™¢",
  "department": "è½¯ä»¶å·¥ç¨‹ç³»",
  "title": "å‰¯æ•™æˆ",
  "position": "è¾…å¯¼å‘˜"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ›´æ–°æ•™å¸ˆä¿¡æ¯æˆåŠŸ",
  "data": {
    "pkTeacher": "T2025000002",
    "pkUser": "U2025000003",
    "teacherNo": "T20230002",
    "name": "æå",
    "gender": 0,
    "idCard": "110101198501052345",
    "college": "è®¡ç®—æœºå­¦é™¢",
    "department": "è½¯ä»¶å·¥ç¨‹ç³»",
    "title": "å‰¯æ•™æˆ",
    "position": "è¾…å¯¼å‘˜",
    "approvalLevel": 1,
    "canApprove": 1,
    "status": 1
  }
}
```

---

### 3.2 è·å–å½“å‰ç™»å½•æ•™å¸ˆä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/teacher/current`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**å“åº”ç¤ºä¾‹**: åŒ3.1

---

### 3.3 åˆ é™¤æ•™å¸ˆä¿¡æ¯

**æ¥å£åœ°å€**: `DELETE /api/teacher/{pkTeacher}`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `pkTeacher`: æ•™å¸ˆä¸»é”®

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "åˆ é™¤æ•™å¸ˆä¿¡æ¯æˆåŠŸ",
  "data": null
}
```

---

### 3.4 æ ¹æ®ä¸»é”®æŸ¥è¯¢æ•™å¸ˆä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/teacher/{pkTeacher}`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `pkTeacher`: æ•™å¸ˆä¸»é”®

**å“åº”ç¤ºä¾‹**: åŒ3.1

---

### 3.5 æ ¹æ®ç”¨æˆ·IDæŸ¥è¯¢æ•™å¸ˆä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/teacher/user/{pkUser}`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `pkUser`: ç”¨æˆ·ä¸»é”®

**å“åº”ç¤ºä¾‹**: åŒ3.1

---

### 3.6 æ ¹æ®å·¥å·æŸ¥è¯¢æ•™å¸ˆä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/teacher/teacherNo/{teacherNo}`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `teacherNo`: å·¥å·

**å“åº”ç¤ºä¾‹**: åŒ3.1

---

### 3.7 åˆ†é¡µæŸ¥è¯¢æ•™å¸ˆä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/teacher/page`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**æŸ¥è¯¢å‚æ•°**:
- `current`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `size`: æ¯é¡µæ¡æ•°ï¼ˆé»˜è®¤10ï¼‰
- `college`: å­¦é™¢ï¼ˆå¯é€‰ï¼‰
- `department`: ç³»åˆ«ï¼ˆå¯é€‰ï¼‰
- `approvalLevel`: å®¡æ‰¹çº§åˆ«ï¼ˆå¯é€‰ï¼‰

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/teacher/page?current=1&size=10&college=è®¡ç®—æœºå­¦é™¢&approvalLevel=1
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "pkTeacher": "T2025000002",
        "pkUser": "U2025000003",
        "teacherNo": "T20230002",
        "name": "æå",
        "college": "è®¡ç®—æœºå­¦é™¢",
        "department": "è½¯ä»¶å·¥ç¨‹ç³»",
        "approvalLevel": 1
      }
    ],
    "total": 50,
    "size": 10,
    "current": 1,
    "pages": 5
  }
}
```

---

## 4. è¯æ˜ç”³è¯·æ¨¡å—

### 4.1 æäº¤è¯æ˜ç”³è¯·

**æ¥å£åœ°å€**: `POST /api/application`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è¯·æ±‚å‚æ•°**:
```json
{
  "pkCt": "CT202500003",
  "applicationReason": "ç”³è¯·å‡ºå›½ç•™å­¦éœ€è¦",
  "applicationData": "{\"courseList\":[{\"courseName\":\"æ•°æ®ç»“æ„\",\"score\":\"92\"},{\"courseName\":\"ç®—æ³•è®¾è®¡\",\"score\":\"88\"}],\"gpa\":\"3.8\"}",
  "copies": 1,
  "urgent": 0
}
```

**å­—æ®µè¯´æ˜**:
- `pkCt`: è¯æ˜æ¨¡æ¿ID
- `applicationReason`: ç”³è¯·ç†ç”±
- `applicationData`: ç”³è¯·æ•°æ®ï¼ˆJSONå­—ç¬¦ä¸²æ ¼å¼ï¼‰
- `copies`: ç”³è¯·ä»½æ•°
- `urgent`: æ˜¯å¦åŠ æ€¥ï¼ˆ0-å¦ 1-æ˜¯ï¼‰

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "ç”³è¯·æäº¤æˆåŠŸ",
  "data": {
    "pkCa": "CA202500001",
    "applicationNo": "APP20250001",
    "pkStudent": "S2025000001",
    "studentName": "å¼ ä¸‰",
    "studentNo": "2021001001",
    "pkCt": "CT202500003",
    "certificateType": "æˆç»©è¯æ˜",
    "applicationReason": "ç”³è¯·å‡ºå›½ç•™å­¦éœ€è¦",
    "status": 0,
    "statusDesc": "å¾…å®¡æ‰¹",
    "currentApprovalLevel": 1,
    "copies": 1,
    "urgent": 0,
    "createTime": "2025-12-29 10:30:00"
  }
}
```

---

### 4.2 æ’¤é”€ç”³è¯·

**æ¥å£åœ°å€**: `PUT /api/application/{pkCa}/cancel`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `pkCa`: ç”³è¯·ä¸»é”®

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "ç”³è¯·å·²æ’¤é”€",
  "data": null
}
```

---

### 4.3 æŸ¥è¯¢ç”³è¯·è¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/application/{pkCa}`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**è·¯å¾„å‚æ•°**:
- `pkCa`: ç”³è¯·ä¸»é”®

**å“åº”ç¤ºä¾‹**: åŒ4.1

---

### 4.4 æŸ¥è¯¢æˆ‘çš„ç”³è¯·åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/application/my`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…

**æŸ¥è¯¢å‚æ•°**:
- `current`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `size`: æ¯é¡µæ¡æ•°ï¼ˆé»˜è®¤10ï¼‰
- `status`: ç”³è¯·çŠ¶æ€ï¼ˆå¯é€‰ï¼‰

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/application/my?current=1&size=10&status=0
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "pkCa": "CA202500001",
        "applicationNo": "APP20250001",
        "certificateType": "æˆç»©è¯æ˜",
        "status": 0,
        "statusDesc": "å¾…å®¡æ‰¹",
        "createTime": "2025-12-29 10:30:00"
      }
    ],
    "total": 20,
    "size": 10,
    "current": 1,
    "pages": 2
  }
}
```

---

### 4.5 æŸ¥è¯¢å¾…å®¡æ‰¹åˆ—è¡¨ï¼ˆæ•™å¸ˆï¼‰

**æ¥å£åœ°å€**: `GET /api/application/pending`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…ï¼ˆä»…æ•™å¸ˆï¼‰

**æŸ¥è¯¢å‚æ•°**:
- `current`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `size`: æ¯é¡µæ¡æ•°ï¼ˆé»˜è®¤10ï¼‰

**è¯·æ±‚ç¤ºä¾‹**:
```
GET /api/application/pending?current=1&size=10
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "pkCa": "CA202500001",
        "applicationNo": "APP20250001",
        "studentName": "å¼ ä¸‰",
        "studentNo": "2021001001",
        "certificateType": "æˆç»©è¯æ˜",
        "status": 0,
        "currentApprovalLevel": 1,
        "createTime": "2025-12-29 10:30:00"
      }
    ],
    "total": 15,
    "size": 10,
    "current": 1,
    "pages": 2
  }
}
```

---

## 5. å®¡æ‰¹æ¨¡å—

### 5.1 å¤„ç†å®¡æ‰¹

**æ¥å£åœ°å€**: `POST /api/approval`

**æ˜¯å¦éœ€è¦ç™»å½•**: âœ…ï¼ˆä»…æ•™å¸ˆï¼‰

**è¯·æ±‚å‚æ•°**:
```json
{
  "pkCa": "CA202500001",
  "approvalResult": 1,
  "approvalComment": "ææ–™é½å…¨ï¼ŒåŒæ„é€šè¿‡"
}
```

**å­—æ®µè¯´æ˜**:
- `pkCa`: ç”³è¯·ä¸»é”®
- `approvalResult`: å®¡æ‰¹ç»“æœï¼ˆ1-é€šè¿‡ 2-æ‹’ç»ï¼‰
- `approvalComment`: å®¡æ‰¹æ„è§

**å“åº”ç¤ºä¾‹**:
```json
{
  "code": 200,
  "message": "å®¡æ‰¹æ“ä½œæˆåŠŸ",
  "data": null
}
```

---

## é€šç”¨è¯´æ˜

### è¯·æ±‚å¤´

é™¤äº†ç™»å½•å’Œæ³¨å†Œæ¥å£å¤–ï¼Œæ‰€æœ‰æ¥å£éƒ½éœ€è¦æºå¸¦JWT Tokenï¼š

```
Authorization: Bearer eyJhbGciOiJIUzUxMiJ9...
```

### å“åº”æ ¼å¼

æ‰€æœ‰æ¥å£ç»Ÿä¸€è¿”å›æ ¼å¼ï¼š

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {}
}
```

**å­—æ®µè¯´æ˜**:
- `code`: çŠ¶æ€ç ï¼ˆ200-æˆåŠŸï¼Œå…¶ä»–-å¤±è´¥ï¼‰
- `message`: æç¤ºä¿¡æ¯
- `data`: å“åº”æ•°æ®

### å¸¸ç”¨çŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æ“ä½œæˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒï¼ˆTokenç¼ºå¤±æˆ–æ— æ•ˆï¼‰ |
| 403 | æ— æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### ç”³è¯·çŠ¶æ€è¯´æ˜

| çŠ¶æ€å€¼ | çŠ¶æ€æè¿° |
|--------|---------|
| 0 | å¾…å®¡æ‰¹ |
| 1 | å®¡æ‰¹ä¸­ |
| 2 | å·²é€šè¿‡ |
| 3 | å·²æ‹’ç» |
| 4 | å·²æ’¤é”€ |

### ç”¨æˆ·ç±»å‹è¯´æ˜

| ç±»å‹å€¼ | ç±»å‹æè¿° |
|--------|---------|
| 0 | å­¦ç”Ÿ |
| 1 | æ•™å¸ˆ |
| 2 | ç®¡ç†å‘˜ |

### æ€§åˆ«è¯´æ˜

| å€¼ | æè¿° |
|----|------|
| 0 | å¥³ |
| 1 | ç”· |

### æ¯•ä¸šçŠ¶æ€è¯´æ˜

| çŠ¶æ€å€¼ | çŠ¶æ€æè¿° |
|--------|---------|
| 0 | åœ¨è¯» |
| 1 | å·²æ¯•ä¸š |
| 2 | ç»“ä¸š |

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025-12-29

**åç«¯æœåŠ¡åœ°å€**: http://localhost:8080

**Context Path**: /api
